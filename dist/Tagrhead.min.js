!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jQuery")):"function"==typeof define&&define.amd?define("Tagrhead",["jQuery"],e):"object"==typeof exports?exports.Tagrhead=e(require("jQuery")):t.Tagrhead=e(t.jQuery)}(this,function(t){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(){function t(e,i,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};r(this,t),this.cur=-1,this.criteriaCur=-1,this.prefix="",this.layer=null,this.criteriaLayer=null,this.provider=n,this.tagsCtrl=a,this.textbox=e,this.tag=null,this.mode="criteria",this.style=s.style,s.wrap?this.wrap=s.wrap:this.wrap=!0,this.container=i,this.init()}return n(t,[{key:"getTags",value:function(){return this.tagsCtrl.getTags()}},{key:"clearTags",value:function(){this.tagsCtrl.clearTags()}},{key:"addTags",value:function(t){this.tagsCtrl.addTags(t)}},{key:"autosuggest",value:function(t,e){var i=this;if(t.length>0){var r=[];t.forEach(function(t){t.results.forEach(function(t){r.push(t)})}),r=r.filter(function(t){return 0===t.itemValue.indexOf(i.textbox.value)}),r.length>0&&e&&this.typeAhead(r[0].itemValue),this.mode="suggestions",this.showDropDownLayer(t)}else this.hideDropDownLayer()}},{key:"selectRange",value:function(t,e){if(this.textbox.createTextRange){var i=this.textbox.createTextRange();i.moveStart("character",t),i.moveEnd("character",e-this.textbox.value.length),i.select()}else this.textbox.setSelectionRange&&this.textbox.setSelectionRange(t,e);this.textbox.focus()}},{key:"typeAhead",value:function(t){if(this.textbox.createTextRange||this.textbox.setSelectionRange){var e=this.textbox.value.length;this.textbox.value=t,this.selectRange(e,t.length)}}},{key:"getLeft",value:function(){var t=void 0;t=!0===this.wrap?this.container:this.textbox;for(var e=0;"BODY"!==t.tagName;)e+=t.offsetLeft,t=t.offsetParent;return e}},{key:"getTop",value:function(){for(var t=this.textbox,e=0;"BODY"!==t.tagName;)e+=t.offsetTop,t=t.offsetParent;return e}},{key:"createCriteriaLayer",value:function(){var t=this;this.criteriaLayer=document.createElement("div"),this.criteriaLayer.className="tagrhead-criterias",this.criteriaLayer.style.visibility="hidden",this.criteriaLayer.style.width=this.textbox.getBoundingClientRect().width,this.criteriaLayer.onmousedown=this.criteriaLayer.onmouseup=this.criteriaLayer.onmouseover=function(e){e=e||window.event;var i=e.target||e.srcElement;"mousedown"===e.type?(t.textbox.value=i.firstChild.nodeValue+":",t.hideCriteriaLayer(),t.textbox.focus(),t.prefix=t.textbox.value.substring(0,t.textbox.value.indexOf(":")),t.provider.requestSuggestions(t,!1),t.textbox.click()):"mouseover"!==e.type||i.classList.contains("tagrhead-criteria-header")||t.highlightCriteria(i)},this.textbox.parentNode.insertBefore(this.criteriaLayer,this.textbox.nextSibling)}},{key:"hideCriteriaLayer",value:function(){this.criteriaLayer.style.visibility="hidden"}},{key:"showCriteriaLayer",value:function(){var t=this,e=this.provider.requestHeaders();this.criteriaLayer.innerHTML="";var i=null;i=document.createElement("div"),i.classList.add("tagrhead-criteria-header"),i.appendChild(document.createTextNode("Category")),this.criteriaLayer.appendChild(i),e.forEach(function(e){i=null,i=document.createElement("div"),i.classList.add("tagrhead-criteria-item"),i.setAttribute("data-criteria",e),i.appendChild(document.createTextNode(e)),t.criteriaLayer.appendChild(i)}),"mdl"===this.style?this.criteriaLayer.style.left="0px":"bootstrap-material-design"===this.style?this.criteriaLayer.style.left="0":this.criteriaLayer.style.left=this.getLeft()+"px",this.criteriaLayer.style.top=this.getTop()+this.textbox.offsetHeight+"px","bootstrap-material-design"===this.style&&(this.criteriaLayer.style.top=this.textbox.offsetHeight+14+"px"),this.criteriaLayer.style.visibility="visible"}},{key:"createDropDownLayer",value:function(){var t=this,e=this;this.layer=document.createElement("div"),this.layer.className="tagrhead-suggestions",this.layer.style.visibility="hidden",this.layer.style.width=this.textbox.getBoundingClientRect().width,this.layer.onmousedown=this.layer.onmouseup=this.layer.onmouseover=function(i){i=i||window.event;var r=i.target||i.srcElement;"mousedown"===i.type?(e.textbox.value=r.firstChild.nodeValue,t.tagsCtrl.addTags(t.tag),e.hideDropDownLayer()):"mouseover"!==i.type||r.classList.contains("tagrhead-header")?e.textbox.focus():e.highlightSuggestion(r)},this.textbox.parentNode.insertBefore(this.layer,this.textbox.nextSibling)}},{key:"hideDropDownLayer",value:function(){this.layer.style.visibility="hidden"}},{key:"showDropDownLayer",value:function(t){var e=this;this.layer.innerHTML="",t.forEach(function(t){var i=null;i=document.createElement("div"),i.classList.add("tagrhead-header"),i.appendChild(document.createTextNode(t.name)),e.layer.appendChild(i),i=null;for(var r=0;r<t.results.length;r++)i=document.createElement("div"),i.classList.add("tagrhead-item"),i.setAttribute("data-key",t.results[r].itemKey),i.setAttribute("data-value",t.results[r].itemValue),i.setAttribute("data-header",t.name),i.appendChild(document.createTextNode(t.results[r].itemValue)),e.layer.appendChild(i)}),"mdl"===this.style?this.layer.style.left="0px":"bootstrap-material-design"===this.style?this.layer.style.left="0":this.layer.style.left=this.getLeft()+"px",this.layer.style.top=this.getTop()+this.textbox.offsetHeight+"px","bootstrap-material-design"===this.style&&(this.layer.style.top="100%"),this.layer.style.visibility="visible"}},{key:"keyUpHandler",value:function(t){var e=this,i=t.keyCode;this.textbox.value.indexOf(":")>0?this.prefix=this.textbox.value.substring(0,this.textbox.value.indexOf(":")):this.prefix="","suggestions"===this.mode&&(8===i||46===i?this.provider.requestSuggestions(e,!1):i<32||i>=33&&i<46||i>=112&&i<=123||this.provider.requestSuggestions(e,!0))}},{key:"keyDownHandler",value:function(t){if("suggestions"===this.mode)switch(t.keyCode){case 38:this.highlightPreviousSuggestion();break;case 40:this.highlightNextSuggestion();break;case 13:this.tagsCtrl.addTags(this.tag),this.hideDropDownLayer()}else switch(t.keyCode){case 38:this.highlightPreviousCriteria();break;case 40:this.highlightNextCriteria();break;case 13:for(var e=this.criteriaLayer.childNodes,i=0;i<e.length;i++){var r=e[i];r.classList.contains("tagrhead-criteria-current")&&(this.textbox.value=r.getAttribute("data-criteria")+":")}this.hideCriteriaLayer()}}},{key:"highlightNextSuggestion",value:function(){var t=this.layer.childNodes;if(t.length>0&&this.cur<t.length-1){var e=t[++this.cur];e.classList.contains("tagrhead-header")&&(e=t[++this.cur]),this.highlightSuggestion(e),this.textbox.value=e.firstChild.nodeValue}}},{key:"highlightNextCriteria",value:function(){var t=this.criteriaLayer.childNodes;if(t.length>0&&this.criteriaCur<t.length-1){var e=t[++this.criteriaCur];e.classList.contains("tagrhead-criteria-header")&&(e=t[++this.criteriaCur]),this.highlightCriteria(e)}}},{key:"highlightCriteria",value:function(t){for(var e=0;e<this.criteriaLayer.childNodes.length;e++){var i=this.criteriaLayer.childNodes[e];i===t?i.classList.add("tagrhead-criteria-current"):i.classList.contains("tagrhead-criteria-current")&&i.classList.remove("tagrhead-criteria-current")}}},{key:"highlightPreviousCriteria",value:function(){var t=this.criteriaLayer.childNodes;if(t.length>0&&this.criteriaCur>0){var e=t[--this.criteriaCur];e.classList.contains("tagrhead-criteria-header")&&(e=t[--this.criteriaCur]),this.highlightCriteria(e)}}},{key:"highlightPreviousSuggestion",value:function(){var t=this.layer.childNodes;if(t.length>0&&this.cur>1){var e=t[--this.cur];e.classList.contains("tagrhead-header")&&(e=t[--this.cur]),this.highlightSuggestion(e),this.textbox.value=e.firstChild.nodeValue}}},{key:"highlightSuggestion",value:function(t){for(var e=0;e<this.layer.childNodes.length;e++){var i=this.layer.childNodes[e];i===t?(i.classList.add("tagrhead-current"),this.tag={key:i.getAttribute("data-key"),value:i.getAttribute("data-value"),header:i.getAttribute("data-header")}):i.classList.contains("tagrhead-current")&&i.classList.remove("tagrhead-current")}}},{key:"init",value:function(){var t=this,e=this;this.textbox.onkeyup=function(i){""===t.textbox.value?(t.mode="criteria",t.hideDropDownLayer()):(t.mode="suggestions",t.hideCriteriaLayer(),i||(i=window.event),e.keyUpHandler(i))},this.textbox.onkeydown=function(t){t||(t=window.event),e.keyDownHandler(t)},this.textbox.onfocus=function(){""===t.textbox.value?(t.mode="criteria","mdl"===t.style&&document.querySelector(".tagrhead-mdl-search-form")&&document.querySelector(".tagrhead-mdl-search-form").classList.add("tagrhead-mdl-search-active"),t.showCriteriaLayer()):(t.mode="suggestions",t.hideCriteriaLayer(),t.prefix=t.textbox.value.substring(0,t.textbox.value.indexOf(":")),t.provider.requestSuggestions(e,!1))},this.textbox.onchange=function(){t.textbox.value.indexOf(":")>0?t.prefix=t.textbox.value.substring(0,t.textbox.value.indexOf(":")):t.prefix=""},this.textbox.onblur=function(){t.textbox.value.indexOf(":")<0&&(e.hideDropDownLayer(),e.hideCriteriaLayer(),"mdl"===t.style&&document.querySelector(".tagrhead-mdl-search-form")&&0===t.getTags().length&&""===t.textbox.value&&document.querySelector(".tagrhead-mdl-search-form").classList.remove("tagrhead-mdl-search-active"))},this.createDropDownLayer(),this.createCriteriaLayer()}}]),t}();e.default=a,t.exports=e.default},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(4),s=function(t){return t&&t.__esModule?t:{default:t}}(a),o=function(){function t(e){r(this,t),this.bloodHoundsData=null,this.init(e)}return n(t,[{key:"_createBloodHoundConfig",value:function(t){return{local:t.data,datumTokenizer:function(e){return s.default.tokenizers.whitespace(e[t.srchKey])},queryTokenizer:s.default.tokenizers.whitespace,identify:function(e){return e[t.srchKey]},limit:50}}},{key:"_createBloodHound",value:function(t){var e=this._createBloodHoundConfig(t),i=new s.default(e),r=void 0,n=function(t){r=t},a=function(t){};return{itemHeader:t.itemHeader,itemKey:t.itemKey,itemValue:t.itemValue,bloodHound:i,search:function(e){return r=void 0,""===e?!0===t.defaultSuggestions?t.data.slice(0,4):[]:(i.search(e,n,a),r)}}}},{key:"init",value:function(t){var e=this;this.bloodHoundsData=t.map(function(t){return e._createBloodHound(t)});var i=this.bloodHoundsData.map(function(t){return t.bloodHound.initialize()});Promise.all(i).then(function(){}).catch(function(t){console.error("error",t)})}},{key:"requestHeaders",value:function(){return this.bloodHoundsData.map(function(t){return t.itemHeader})}},{key:"requestSuggestions",value:function(t,e){var i=[],r=t.textbox.value,n=t.prefix;""!==n&&(r=r.substring(n.length+1,r.length)),""===n?this.bloodHoundsData.forEach(function(t){var e=t.search(r);e=e.map(function(e){return{itemKey:e[t.itemKey],itemValue:e[t.itemValue]}}),e.length>0&&i.push({name:t.itemHeader,results:e})}):this.bloodHoundsData.forEach(function(t){if(t.itemHeader===n){var e=t.search(r);e=e.map(function(e){return{itemKey:e[t.itemKey],itemValue:e[t.itemValue]}}),e.length>0&&i.push({name:t.itemHeader,results:e})}}),t.autosuggest(i,e)}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return"string"==typeof t?(e||document).querySelector(t):t}function s(t,e){return"string"==typeof t?(e||document).querySelectorAll(t):[t]}function o(t,e){return new RegExp("(^|\\s+)"+t+"(\\s+|$)").test(e.className)}function u(t,e){if(!o(t,e))return e.className+=""===e.className?t:" "+t,e.className}function h(t,e){e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)"),"")}function c(t,e,i,r){r=r||!1,t.addEventListener(e,function e(n){i.call(this,n),t.removeEventListener(n.type,e,r)},r)}function l(t,e){var i=document.createElement(t);if(e)for(var r in e)void 0!==i[r]&&(i[r]=e[r]);return i}Object.defineProperty(e,"__esModule",{value:!0});var d=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),f=function(){function t(e,i,r){n(this,t),!1===r.wrap?this.wrap=r.wrap:this.wrap=!0,!1===r.manual?this.manual=!1:this.manual=!0,"mdl"===r.style?this.createTag=this.createMdlTag:"bootstrap-material-design"===r.style?this.createTag=this.createBootstrapMdTag:this.createTag=this.createBasicTag,this.containerId=e,this.tagsArr=[],this.KEYS={ENTER:13,COMMA:188,BACK:8},this.transitionEnd=this.whichTransitionEnd(),this.pressed=!1,this.timer=void 0,this.container=a(e),this.wrap?(u("tagrhead-tags-container",this.container),this.tagsContainer=this.container):(this.tagsContainer=l("div",{id:"tagrhead-tags-container",className:"tagrhead-tags-container"}),this.container.appendChild(this.tagsContainer)),this.textbox=a(i),this.tagsContainer.addEventListener("click",this.removeBtnHandler.bind(this),!1),this.textbox.addEventListener("keydown",this.keyHandler.bind(this),!1),this.textbox.addEventListener("keyup",this.backHandler.bind(this),!1)}return d(t,[{key:"removeBtnHandler",value:function(t){if(t.preventDefault(),t.target.classList.contains("tagrhead-tag__remove")){for(var e=t.target.parentNode;!e.classList.contains("tagrhead-tag");)e=e.parentNode;var i=a(".tagrhead-tag__value",e);this.tagsContainer.removeChild(e);var r=-1;this.tagsArr.forEach(function(t,e,n){t.value===i.getAttribute("data-value")&&(r=e)}),this.tagsArr.splice(r,1)}this.textbox.focus()}},{key:"backHandler",value:function(t){this.isPressed=!1}},{key:"keyHandler",value:function(t){if("INPUT"===t.target.tagName){var e=t.target,i=t.which||t.keyCode;if(i!==this.KEYS.BACK){var n=s(".tagrhead-tag__marked",this.tagsContainer);n.length>0&&[].concat(r(n)).forEach(function(t){h("tagrhead-tag__marked",t)})}var a=e.value.trim();i===this.KEYS.ENTER&&!0===this.manual?(e.blur(),this.addTag(a),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.focus()},10)):i===this.KEYS.BACK&&(""!==t.target.value||this.isPressed||(this.isPressed=!0,this.removeTag()))}}},{key:"createBasicTag",value:function(t,e,i){return e=e||t,i=i||t,l("div",{className:"tagrhead-tag",innerHTML:'<span class="tagrhead-tag__value" data-key="'+e+'" data-value="'+t+'" data-header="'+i+'" ><span>'+i+"-"+t+'</span><button class="tagrhead-tag__remove">&times;</button></span>'})}},{key:"createMdlTag",value:function(t,e,i){return e=e||t,i=i||t,l("div",{className:"tagrhead-tag",innerHTML:'<span class="tagrhead-tag__value mdl-chip mdl-chip--deletable"data-key="'+e+'" data-value="'+t+'" data-header="'+i+'" ><span class="mdl-chip__text">'+i+"-"+t+'</span><button class="tagrhead-tag__remove mdl-chip__action"><i class="tagrhead-tag__remove material-icons">cancel</i></button></span>'})}},{key:"createBootstrapMdTag",value:function(t,e,i){return e=e||t,i=i||t,l("div",{className:"tagrhead-tag",innerHTML:'<a class="tagrhead-tag__value btn btn-info" href="javascript:void(0)"data-key="'+e+'" data-value="'+t+'" data-header="'+i+'" >'+i+"-"+t+'<span class="tagrhead-tag__remove badge">x</span></a>'})}},{key:"removeTag",value:function(){if(0!==this.tagsArr.length){var t=s(".tagrhead-tag",this.tagsContainer),e=t[t.length-1];if(!o("tagrhead-tag__marked",e))return void u("tagrhead-tag__marked",e);this.tagsArr.pop(),this.tagsContainer.removeChild(e)}}},{key:"addTag",value:function(t,e,i){var r=this;if(e=e||t,i=i||t,""===(t=t.toString().replace(/,/g,"").trim()))return this.textbox.value="",this.textbox.value;if(~this.tagsArr.map(function(t){return t.value}).indexOf(t)){var n=s("tagrhead-tag__exists",this.tagsContainer);return Array.prototype.forEach.call(n,function(t){r.transitionEnd?c(t,r.transitionEnd,function(){h("tagrhead-tag__exists",t)}):h("tagrhead-tag__exists",t)}),this.textbox.value="",this.textbox.value}var o=this.createTag(t,e,i);this.wrap?this.tagsContainer.insertBefore(o,this.tagsContainer.childNodes[0]):this.tagsContainer.insertBefore(o,a(this.containerId)[0]),this.tagsArr.push({header:i,key:e,value:t}),this.textbox.value=""}},{key:"whichTransitionEnd",value:function(){var t=document.documentElement,e={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd otransitionend"};for(var i in e)if(void 0!==t.style[i])return e[i];return!1}},{key:"getTags",value:function(){return this.tagsArr}},{key:"clearTags",value:function(){this&&(this.tagsArr=[],this.tagsContainer.innerHTML="",this.container.innerHTML="",this.container.appendChild(this.textbox))}},{key:"addTags",value:function(t){var e=this;this&&(Array.isArray(t)?t.forEach(function(t){e.addTag(t.value,t.key,t.header)}):this.addTag(t.value,t.key,t.header))}},{key:"destroy",value:function(){this&&(this.container.removeEventListener("click",this.removeBtnHandler,!1),this.container.removeEventListener("keydown",this.keyHandler,!1),this.container.removeEventListener("keyup",this.keyHandler,!1),this.container.parentNode.removeChild(this.container),this.tagsArr=null,this.timer=null,this.container=null,this.textbox=null,this.transitionEnd=null)}}]),t}();e.default=f,t.exports=e.default},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(0),o=r(s),u=i(1),h=r(u),c=i(2),l=r(c),d=function(){function t(e,i,r,a){n(this,t),this.textbox=new o.default(document.getElementById(e),document.getElementById(i),new h.default(r),new l.default("#"+i,"#"+e,a),a)}return a(t,[{key:"getTags",value:function(){return this.textbox.getTags()}},{key:"clearTags",value:function(){this.textbox.clearTags()}},{key:"addTags",value:function(t){this.textbox.addTags(t)}}]),t}();e.default=d,t.exports=e.default},function(t,e,i){var r,n;/*!
 * typeahead.js 1.1.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2017 Twitter, Inc. and other contributors; Licensed MIT
 */
!function(a,s){r=[i(9)],void 0!==(n=function(t){return a.Bloodhound=s(t)}.apply(e,r))&&(t.exports=n)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function r(t,e){return i(e,t)}t.each(e,r)},map:t.map,filter:t.grep,every:function(e,i){var r=!0;return e?(t.each(e,function(t,n){if(!(r=i.call(null,n,t,e)))return!1}),!!r):r},some:function(e,i){var r=!1;return e?(t.each(e,function(t,n){if(r=i.call(null,n,t,e))return!1}),!!r):r},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var r,n;return function(){var a,s,o=this,u=arguments;return a=function(){r=null,i||(n=t.apply(o,u))},s=i&&!r,clearTimeout(r),r=setTimeout(a,e),s&&(n=t.apply(o,u)),n}},throttle:function(t,e){var i,r,n,a,s,o;return s=0,o=function(){s=new Date,n=null,a=t.apply(i,r)},function(){var u=new Date,h=e-(u-s);return i=this,r=arguments,h<=0?(clearTimeout(n),n=null,s=u,a=t.apply(i,r)):n||(n=setTimeout(o,h)),a}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},guid:function(){function t(t){var e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return"tt-"+t()+t(!0)+t(!0)+t()},noop:function(){}}}(),i="1.1.1",r=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function i(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function r(t){t=e.toStr(t);var i=[],r="";return e.each(t.split(""),function(t){t.match(/\s+/)?r="":(i.push(r+t),r+=t)}),i}function n(t){return function(i){return i=e.isArray(i)?i:[].slice.call(arguments,0),function(r){var n=[];return e.each(i,function(i){n=n.concat(t(e.toStr(r[i])))}),n}}}return{nonword:i,whitespace:t,ngram:r,obj:{nonword:n(i),whitespace:n(t),ngram:n(r)}}}(),n=function(){"use strict";function i(i){this.maxSize=e.isNumber(i)?i:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function r(){this.head=this.tail=null}function n(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(i.prototype,{set:function(t,e){var i,r=this.list.tail;this.size>=this.maxSize&&(this.list.remove(r),delete this.hash[r.key],this.size--),(i=this.hash[t])?(i.val=e,this.list.moveToFront(i)):(i=new n(t,e),this.list.add(i),this.hash[t]=i,this.size++)},get:function(t){var e=this.hash[t];if(e)return this.list.moveToFront(e),e.val},reset:function(){this.size=0,this.hash={},this.list=new r}}),e.mixin(r.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),i}(),a=function(){"use strict";function i(t,i){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=i||o,!this.ls&&this._noop()}function r(){return(new Date).getTime()}function n(t){return JSON.stringify(e.isUndefined(t)?null:t)}function a(e){return t.parseJSON(e)}function s(t){var e,i,r=[],n=o.length;for(e=0;e<n;e++)(i=o.key(e)).match(t)&&r.push(i.replace(t,""));return r}var o;try{o=window.localStorage,o.setItem("~~~","!"),o.removeItem("~~~")}catch(t){o=null}return e.mixin(i.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(t){"QuotaExceededError"===t.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),a(this.ls.getItem(this._prefix(t)))},set:function(t,i,a){return e.isNumber(a)?this._safeSet(this._ttlKey(t),n(r()+a)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),n(i))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=s(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var i=a(this.ls.getItem(this._ttlKey(t)));return!!(e.isNumber(i)&&r()>i)}}),i}(),s=function(){"use strict";function i(t){t=t||{},this.maxPendingRequests=t.maxPendingRequests||6,this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=!1===t.cache?new n(0):s}var r=0,a={},s=new n(10);return i.setMaxPendingRequests=function(t){this.maxPendingRequests=t},i.resetCache=function(){s.reset()},e.mixin(i.prototype,{_fingerprint:function(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function i(t){e(null,t),h._cache.set(o,t)}function n(){e(!0)}function s(){r--,delete a[o],h.onDeckRequestArgs&&(h._get.apply(h,h.onDeckRequestArgs),h.onDeckRequestArgs=null)}var o,u,h=this;o=this._fingerprint(t),this.cancelled||o!==this.lastReq||((u=a[o])?u.done(i).fail(n):r<this.maxPendingRequests?(r++,a[o]=this._send(t).done(i).fail(n).always(s)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(i,r){var n,a;r=r||t.noop,i=e.isString(i)?{url:i}:i||{},a=this._fingerprint(i),this.cancelled=!1,this.lastReq=a,(n=this._cache.get(a))?r(null,n):this._get(i,r)},cancel:function(){this.cancelled=!0}}),i}(),o=window.SearchIndex=function(){"use strict";function i(i){i=i||{},i.datumTokenizer&&i.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=i.identify||e.stringify,this.datumTokenizer=i.datumTokenizer,this.queryTokenizer=i.queryTokenizer,this.matchAnyQueryToken=i.matchAnyQueryToken,this.reset()}function r(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function n(){var t={};return t[u]=[],t[o]={},t}function a(t){for(var e={},i=[],r=0,n=t.length;r<n;r++)e[t[r]]||(e[t[r]]=!0,i.push(t[r]));return i}function s(t,e){var i=0,r=0,n=[];t=t.sort(),e=e.sort();for(var a=t.length,s=e.length;i<a&&r<s;)t[i]<e[r]?i++:t[i]>e[r]?r++:(n.push(t[i]),i++,r++);return n}var o="c",u="i";return e.mixin(i.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var i=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var a,s;i.datums[a=i.identify(t)]=t,s=r(i.datumTokenizer(t)),e.each(s,function(t){var e,r,s;for(e=i.trie,r=t.split("");s=r.shift();)e=e[o][s]||(e[o][s]=n()),e[u].push(a)})})},get:function(t){var i=this;return e.map(t,function(t){return i.datums[t]})},search:function(t){var i,n,h=this;return i=r(this.queryTokenizer(t)),e.each(i,function(t){var e,i,r,a;if(n&&0===n.length&&!h.matchAnyQueryToken)return!1;for(e=h.trie,i=t.split("");e&&(r=i.shift());)e=e[o][r];if(e&&0===i.length)a=e[u].slice(0),n=n?s(n,a):a;else if(!h.matchAnyQueryToken)return n=[],!1}),n?e.map(a(n),function(t){return h.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=n()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),u=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new a(t.cacheKey)}var i;return i={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(i.data,t,this.ttl),this.storage.set(i.protocol,location.protocol,this.ttl),this.storage.set(i.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(i.data),e.protocol=this.storage.get(i.protocol),e.thumbprint=this.storage.get(i.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function i(e){t(null,n.transform(e))}var r,n=this;t&&(r=this.prepare(this._settings()),this.transport(r).fail(e).done(i))},clear:function(){return this.storage.clear(),this}}),t}(),h=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.indexResponse=t.indexResponse,this.transport=new s({cache:t.cache,limiter:t.limiter,transport:t.transport,maxPendingRequests:t.maxPendingRequests})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){function i(t,i){e(t?[]:n.transform(i))}var r,n=this;if(e)return t=t||"",r=this.prepare(t,this._settings()),this.transport.get(r,i)},cancelLastRequest:function(){this.transport.cancel()}}),t}(),c=function(){"use strict";function r(r){var n;return r?(n={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},r=e.isString(r)?{url:r}:r,r=e.mixin(n,r),!r.url&&t.error("prefetch requires url to be set"),r.transform=r.filter||r.transform,r.cacheKey=r.cacheKey||r.url,r.thumbprint=i+r.thumbprint,r.transport=r.transport?o(r.transport):t.ajax,r):null}function n(i){var r;if(i)return r={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(r,i),!i.url&&t.error("remote requires url to be set"),i.transform=i.filter||i.transform,i.prepare=a(i),i.limiter=s(i),i.transport=i.transport?o(i.transport):t.ajax,delete i.replace,delete i.wildcard,delete i.rateLimitBy,delete i.rateLimitWait,i}function a(t){function e(t,e){return e.url=a(e.url,t),e}function i(t,e){return e.url=e.url.replace(s,encodeURIComponent(t)),e}function r(t,e){return e}var n,a,s;return n=t.prepare,a=t.replace,s=t.wildcard,n||(n=a?e:t.wildcard?i:r)}function s(t){var i,r,n;return i=t.limiter,r=t.rateLimitBy,n=t.rateLimitWait,i||(i=/^throttle$/i.test(r)?function(t){return function(i){return e.throttle(i,t)}}(n):function(t){return function(i){return e.debounce(i,t)}}(n)),i}function o(i){return function(r){function n(t){e.defer(function(){s.resolve(t)})}function a(t){e.defer(function(){s.reject(t)})}var s=t.Deferred();return i(r,n,a),s}}return function(i){var a,s;return a={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,matchAnyQueryToken:!1,sufficient:5,indexRemote:!1,sorter:null,local:[],prefetch:null,remote:null},i=e.mixin(a,i||{}),!i.datumTokenizer&&t.error("datumTokenizer is required"),!i.queryTokenizer&&t.error("queryTokenizer is required"),s=i.sorter,i.sorter=s?function(t){return t.sort(s)}:e.identity,i.local=e.isFunction(i.local)?i.local():i.local,i.prefetch=r(i.prefetch),i.remote=n(i.remote),i}}();return function(){"use strict";function i(t){t=c(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.indexRemote=t.indexRemote,this.local=t.local,this.remote=t.remote?new h(t.remote):null,this.prefetch=t.prefetch?new u(t.prefetch):null,this.index=new o({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),!1!==t.initialize&&this.initialize()}var n;return n=window&&window.Bloodhound,i.noConflict=function(){return window&&(window.Bloodhound=n),i},i.tokenizers=r,e.mixin(i.prototype,{__ttAdapter:function(){function t(t,e,r){return i.search(t,e,r)}function e(t,e){return i.search(t,e)}var i=this;return this.remote?t:e},_loadPrefetch:function(){function e(t,e){return t?i.reject():(n.add(e),n.prefetch.store(n.index.serialize()),void i.resolve())}var i,r,n=this;return i=t.Deferred(),this.prefetch?(r=this.prefetch.fromCache())?(this.index.bootstrap(r),i.resolve()):this.prefetch.fromNetwork(e):i.resolve(),i.promise()},_initialize:function(){function t(){e.add(e.local)}var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,i,r){function n(t){var i=[];e.each(t,function(t){!e.some(a,function(e){return s.identify(t)===s.identify(e)})&&i.push(t)}),s.indexRemote&&s.add(i),r(i)}var a,s=this;return i=i||e.noop,r=r||e.noop,a=this.sorter(this.index.search(t)),i(this.remote?a.slice():a),this.remote&&a.length<this.sufficient?this.remote.get(t,n):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return s.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),i}()})},,,,,function(e,i){e.exports=t}])});